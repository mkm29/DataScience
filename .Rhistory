makeCacheMatrix <- function(m = matrix()) {
inv <- NULL #placeholder for inverse
get <- function() m
set <- function(mat) {
m <<- mat
i <<- NULL
}
# also need getter and setter for inv
getInverse <- function() inv
setInverse <- function(i) {
inv <<- i
}
# return list of all 4 of these properties
list(get = get, set = set, getInverse = getInverse, setInverse = setInverse)
}
cacheSolve <- function(x, ...) {
inv <- x$getInverse()
if(!is.null(inv)) {
message("getting cached data")
return(inv)
}
data <- x$get()
inv <- solve(data)
x$setInverse(inv)
inv
}
x <- seq(0,1,100)
head(x)
?seq
x <- seq(from =0, to = 1, by = 0.01)
head(x)
?log
y <- log10(x)
head(y)
tail(y)
y <- log(x)
head(y)
tail(y)
head(log2(x))
head(log(x))
log1p(0)
log(1)
log1p(1)
log(2)
?lag
install.packages("RMySQL")
library(RMySQL)
ucscDb <- dbConnect(MySQL(),user = "genome", host = "genome-mysql.soe.ucsc.edu")
result <- dbGetQuery(ucscDb, "show databases;"); dbDisconnect(ucscDb);
result
typeof(result)
typeof(ucscDb)
dbUser <- "genome"
dbHost <- "genome-mysql.soe.ucsc.edu"
hg19 <- dbConnect(MySQL(), user =dbUser, db = "hg19", host = dbHost)
allTables <- dbListTables(hg19)
length(allTables)
allTables[1:5]
typeof(allTables)
dbListFields(hg19, "HInv")
dbListFields(hg19, allTables[1])
allTables[1:100]
dbListFields(hg19, "affyU133Plus2")
dbGetQuery(hg19, "select count(*) affyU133Plus2")
dbGetQuery(hg19, "select count(*) affyU133Plus2")
dbGetQuery(hg19, "select count(*) from affyU133Plus2")
affyData <- dbReadTable(hg19, "affyU133Plus2")
head(affyData)
data <- dbGetQuery(hg19, "select * from affyU133Plus2")
query <- dbSendQuery(hg19, "select * from affyU133Plus2 where misMatch between 1 and 3")
head(data)
query <- dbSendQuery(hg19, "select * from affyU133Plus2 where misMatches between 1 and 3")
type.convert(query)
typeof(query)
affyMis <- fetch(query); quantile(affyMis$misMatches)
head(affyMis)
dim(affyMis)
affyMisSmall <- fetch(query, n=10); dbClearResult(query);
dim(affyMisSmall)
query
dbDisconnect(hg19)
source("https://bioconductor.org/biocLite.R")
source("https://bioconductor.org/biocLite.R")
biocLite("rhdf5")
library(rhdf5)
created = h5createFile("example.h5")
created
typeof(created)
dir()
if(created) {
createdGroup1 <- h5createGroup("example.h5", "foo")
createdGroup2 <- h5createGroup("example.h5", "bar")
if(createdGroup1) {
createdGroup3 <- h5createGroup("example.h5", "foo/foobar")
}
}
h5ls("example.h5")
install.packages(c("jpeg", "png", "bmp"))
library(jpeg)
img <- readJPEG("https://d396qusza40orc.cloudfront.net/getdata%2Fjeff.jpg")
img <- readJPEG("https://d396qusza40orc.cloudfront.net/getdata%2Fjeff.jpg")
download.file("https://d396qusza40orc.cloudfront.net/getdata%2Fjeff.jpg", "jeff.jpg")
download.file("https://d396qusza40orc.cloudfront.net/getdata%2Fjeff.jpg", "jeff.jpg", mode = "wb")
download.file('https://d396qusza40orc.cloudfront.net/getdata%2Fjeff.jpg'
, 'jeff.jpg'
, mode='wb' )
img <- download.file("https://d396qusza40orc.cloudfront.net/getdata%2Fjeff.jpg")
img <- download.file("https://d396qusza40orc.cloudfront.net/getdata%2Fjeff.jpg", "jeff.jpg")
library(data.table)
dt <- read.csv("https://d396qusza40orc.cloudfront.net/getdata%2Fdata%2FGDP.csv")
dt <- data.table(dt)
head(dt)
dt <- read.csv("https://d396qusza40orc.cloudfront.net/getdata%2Fdata%2FGDP.csv")
head(dt)
dt <- data.table(dt)
GDP <- dt
rm(dt)
ed <- data.table::fread("https://d396qusza40orc.cloudfront.net/getdata%2Fdata%2FEDSTATS_Country.csv")
EDU <- data.table::fread("https://d396qusza40orc.cloudfront.net/getdata%2Fdata%2FEDSTATS_Country.csv")
GDP <- fread("https://d396qusza40orc.cloudfront.net/getdata%2Fdata%2FGDP.csv")
rm(ed)
rm(img)
rm(rate)
cameraData <- fread("https://data.baltimorecity.gov/api/views/dz54-2aru/rows.csv?accessType=DOWNLOAD")
View(cameraData)
tolower(names(cameraData))
names(cameraData)
names(cameraData) <- tolower(names(cameraData))
names(cameraData)
splitNames <- strsplit(names(cameraData), "\\.")
splitNames
splitNames[[6]]
splitNames[[6]][[1]]
firstElement <- function(x) { x[1] }
sapply(splitNames, firstElement)
reviews <- read.csv("https://github.com/jtleek/dataanalysis/blob/master/week2/007summarizingData/data/reviews.csv")
solutions <- read.csv("https://github.com/jtleek/dataanalysis/blob/master/week2/007summarizingData/data/solutions.csv")
?sub
sub("_", "", names(reviews),)
View(reviews)
reviews <- read.csv("https://raw.githubusercontent.com/jtleek/dataanalysis/master/week2/007summarizingData/data/reviews.csv")
reviews <- read.csv("https://raw.githubusercontent.com/jtleek/dataanalysis/master/week2/007summarizingData/data/reviews.csv")
solutions <- read.csv("https://raw.githubusercontent.com/jtleek/dataanalysis/master/week2/007summarizingData/data/solutions.csv")
names(reviews)
sub("_","", names(reviews))
names(reviews)
names(reviews) <- sub("_","", names(reviews))
names(reviews)
length("This is a test")
paste("Mitch", "Murphy")
paste("Mitch", "Murphy", sep = " ")
paste0("Mitch", "Murphy")
paste("Mitch", "Murphy", sep = "")
?date
Sys.Date()
Sys.setenv(TZ = "America/New_York")
Sys.getenv("TZ")
as.POSIXct(t, tz=getOption("tz"))
Sys.Date()
Sys.Date()
?format
dte <- format(Sys.Date(), "%m/%d/%Y")
dte
date2 <- as.Date("02/11/2018")
date2
date2 - dte
class(dte)
class(date2)
date2 <- format("02/11/2018", "%m/%d/%Y")
format(Sys.Date(), "%m/%d/%Y")
format(Sys.Date(), "%m/%d/%Y") + 14
julian(dte)
julian(Sys.time())
library(data.table)
ACS <- fread("https://d396qusza40orc.cloudfront.net/getdata%2Fdata%2Fss06hid.csv")
View(ACS)
names(ACS)
setwd("~/Desktop/DataScience/coursera/")
dir()
y.train <- read.csv("data/UCI_HAR_Dataset/train/X_train.txt ")
# Set the working directory
base_directory <- "~/Desktop/DataScience/coursera/"
getwd()
base_directory
init <- function(base_directory = "~/Desktop/DataScience/coursera/") {
# Set the working directory
setwd(base_directory)
# Load needed packages
library(data.table)
}
init()
?install.packages
install.packages("data.table", type = "mac.binary")
install.packages("data.table", type = "mac.binary")
init <- function(base_directory = "~/Desktop/DataScience/coursera/") {
# Set the working directory
setwd(base_directory)
# Load needed packages
library(data.table)
}
init()
paste(getwd(),"data/UCI_HAR_Dataset/train/X_train.txt ")
paste(getwd(),"data/UCI_HAR_Dataset/train/X_train.txt",sep = "/")
y.train <<- read.csv(paste(getwd(),"data/UCI_HAR_Dataset/train/X_train.txt",sep = "/"))
typeof(y.train)
class(y.train)
?fread
rm(y.train)
y.train <<- fread(paste(getwd(),"data/UCI_HAR_Dataset/train/X_train.txt",sep = "/"))
head(y.train)
View(y.train)
rm(y.train)
rootPath <- getwd()
library(reshape2)
# Read data
activityLabels <<- fread(paste(rootPath,activity_labels.txt,sep = "/"))
paste(rootPath,activity_labels.txt,sep = "/")
# Read data
activityLabels <<- fread(paste(rootPath,"activity_labels.txt",sep = "/"))
rootPath
paste(rootPath, "activity_labels.txt", sep = "/")
# Read data
activityLabels <<- fread(paste(rootPath, "activity_labels.txt", sep = "/"))
getwd()
dataDirectory <- paste(getwd(),"data/UCI_HAR_Dataset/",sep = "/")
# Read data
activityLabels <<- fread(paste0(dataDirectory, "activity_labels.txt"))
View(activityLabels)
# Read data
activityLabels <<- fread(paste0(dataDirectory, "activity_labels.txt"), col.names = c("classLabels", "activityName"))
View(activityLabels)
features <<- fread(paste0(dataDirectory, "features.txt"), col.names = c("index", "featureNames"))
View(features)
features <- fread(paste0(dataDirectory, "features.txt"), col.names = c("index", "featureNames"))
features <<- grep("(mean|std)\\(\\)", features[, featureNames])
features <- fread(paste0(dataDirectory, "features.txt"), col.names = c("index", "featureNames"))
featuresWanted <- grep("(mean|std)\\(\\)", features[, featureNames])
featuresWanted
?setnames
##################################################
## Project: Getting and Cleaning Data Course Project
## Script: Read the accelometer data collected by UCI
## from Samsung Galaxy phones, clean it, perform simple stats on it
## Return a human-readable, formatted data frame
## Source: http://archive.ics.uci.edu/ml/datasets/Human+Activity+Recognition+Using+Smartphones
## Date: 2/12/18
## Author: Mitch Murphy
##################################################
init <- function(base_directory = "~/Desktop/DataScience/coursera/") {
# Set the working directory
setwd(base_directory)
# Load needed packages
library(data.table)
library(reshape2)
}
readData <- function() {
dataDirectory <- paste(getwd(),"data/UCI_HAR_Dataset/",sep = "/")
# Read data
activityLabels <- fread(paste0(dataDirectory, "activity_labels.txt"), col.names = c("classLabels", "activityName"))
features <- fread(paste0(dataDirectory, "features.txt"), col.names = c("index", "featureNames"))
featuresToInclude <- grep("(mean|std)\\(\\)", features[, featureNames])
measurements <- features[featuresToInclude,featureNames]
measurements <- gsub('[()]', '', measurements)
train.x <- fread(paste(rootPath,"data/UCI_HAR_Dataset/train/X_train.txt", sep = "/"))[, featuresToInclude, with = FALSE]
data.table::setnames(train.x, colnames(train.x), measurements)
train.y <- fread(paste(rootPath,"data/UCI_HAR_Dataset/train/Y_train.txt", sep = "/"), col.names = c("Activity"))
train.subjects <- fread(paste(rootPath,"data/UCI_HAR_Dataset/train/subject_train.txt", sep = "/"), col.names = c("SubjectNum"))
train <<- cbind(train.subjects, train.y, train.x)
# Now load up the test data
test.x <- fread(paste(rootPath,"data/UCI_HAR_Dataset/test/X_test.txt", sep = "/"))[, featuresToInclude, with = FALSE]
data.table::setnames(test.x, colnames(test.x), measurements)
test.y <- fread(paste(rootPath,"data/UCI_HAR_Dataset/test/Y_test.txt", sep = "/"), col.names = c("Activity"))
test.subjects <- fread(paste(rootPath,"data/UCI_HAR_Dataset/test/subject_test.txt", sep = "/"), col.names = c("SubjectNum"))
test <<- cbind(test.subjects, test.y, test.x)
}
init()
readData()
readData <- function() {
dataDirectory <- paste(getwd(),"data/UCI_HAR_Dataset/",sep = "/")
# Read data
activityLabels <- fread(paste0(dataDirectory, "activity_labels.txt"), col.names = c("classLabels", "activityName"))
features <- fread(paste0(dataDirectory, "features.txt"), col.names = c("index", "featureNames"))
featuresToInclude <- grep("(mean|std)\\(\\)", features[, featureNames])
measurements <- features[featuresToInclude,featureNames]
measurements <- gsub('[()]', '', measurements)
train.x <- fread(paste(dataDirectory,"data/UCI_HAR_Dataset/train/X_train.txt", sep = "/"))[, featuresToInclude, with = FALSE]
data.table::setnames(train.x, colnames(train.x), measurements)
train.y <- fread(paste(dataDirectory,"data/UCI_HAR_Dataset/train/Y_train.txt", sep = "/"), col.names = c("Activity"))
train.subjects <- fread(paste(rootPath,"data/UCI_HAR_Dataset/train/subject_train.txt", sep = "/"), col.names = c("SubjectNum"))
train <<- cbind(train.subjects, train.y, train.x)
# Now load up the test data
test.x <- fread(paste(dataDirectory,"data/UCI_HAR_Dataset/test/X_test.txt", sep = "/"))[, featuresToInclude, with = FALSE]
data.table::setnames(test.x, colnames(test.x), measurements)
test.y <- fread(paste(dataDirectory,"data/UCI_HAR_Dataset/test/Y_test.txt", sep = "/"), col.names = c("Activity"))
test.subjects <- fread(paste(rootPath,"data/UCI_HAR_Dataset/test/subject_test.txt", sep = "/"), col.names = c("SubjectNum"))
test <<- cbind(test.subjects, test.y, test.x)
}
init()
readData()
paste(getwd(),"data/UCI_HAR_Dataset/",sep = "/")
readData <- function() {
dataDirectory <- paste(getwd(),"data/UCI_HAR_Dataset/",sep = "")
# Read data
activityLabels <- fread(paste0(dataDirectory, "activity_labels.txt"), col.names = c("classLabels", "activityName"))
features <- fread(paste0(dataDirectory, "features.txt"), col.names = c("index", "featureNames"))
featuresToInclude <- grep("(mean|std)\\(\\)", features[, featureNames])
measurements <- features[featuresToInclude,featureNames]
measurements <- gsub('[()]', '', measurements)
train.x <- fread(paste(dataDirectory,"data/UCI_HAR_Dataset/train/X_train.txt", sep = "/"))[, featuresToInclude, with = FALSE]
data.table::setnames(train.x, colnames(train.x), measurements)
train.y <- fread(paste(dataDirectory,"data/UCI_HAR_Dataset/train/Y_train.txt", sep = "/"), col.names = c("Activity"))
train.subjects <- fread(paste(rootPath,"data/UCI_HAR_Dataset/train/subject_train.txt", sep = "/"), col.names = c("SubjectNum"))
train <<- cbind(train.subjects, train.y, train.x)
# Now load up the test data
test.x <- fread(paste(dataDirectory,"data/UCI_HAR_Dataset/test/X_test.txt", sep = "/"))[, featuresToInclude, with = FALSE]
data.table::setnames(test.x, colnames(test.x), measurements)
test.y <- fread(paste(dataDirectory,"data/UCI_HAR_Dataset/test/Y_test.txt", sep = "/"), col.names = c("Activity"))
test.subjects <- fread(paste(rootPath,"data/UCI_HAR_Dataset/test/subject_test.txt", sep = "/"), col.names = c("SubjectNum"))
test <<- cbind(test.subjects, test.y, test.x)
}
init()
readData()
readData <- function() {
dataDirectory <- paste(getwd(),"data/UCI_HAR_Dataset/",sep = "")
# Read data
activityLabels <- fread(paste(dataDirectory, "activity_labels.txt", sep = "/"), col.names = c("classLabels", "activityName"))
features <- fread(paste0(dataDirectory, "features.txt"), col.names = c("index", "featureNames"))
featuresToInclude <- grep("(mean|std)\\(\\)", features[, featureNames])
measurements <- features[featuresToInclude,featureNames]
measurements <- gsub('[()]', '', measurements)
train.x <- fread(paste(dataDirectory,"data/UCI_HAR_Dataset/train/X_train.txt", sep = "/"))[, featuresToInclude, with = FALSE]
data.table::setnames(train.x, colnames(train.x), measurements)
train.y <- fread(paste(dataDirectory,"data/UCI_HAR_Dataset/train/Y_train.txt", sep = "/"), col.names = c("Activity"))
train.subjects <- fread(paste(rootPath,"data/UCI_HAR_Dataset/train/subject_train.txt", sep = "/"), col.names = c("SubjectNum"))
train <<- cbind(train.subjects, train.y, train.x)
# Now load up the test data
test.x <- fread(paste(dataDirectory,"data/UCI_HAR_Dataset/test/X_test.txt", sep = "/"))[, featuresToInclude, with = FALSE]
data.table::setnames(test.x, colnames(test.x), measurements)
test.y <- fread(paste(dataDirectory,"data/UCI_HAR_Dataset/test/Y_test.txt", sep = "/"), col.names = c("Activity"))
test.subjects <- fread(paste(rootPath,"data/UCI_HAR_Dataset/test/subject_test.txt", sep = "/"), col.names = c("SubjectNum"))
test <<- cbind(test.subjects, test.y, test.x)
}
init()
readData()
paste(getwd(),"data/UCI_HAR_Dataset/",sep = "/")
readData <- function() {
# "/Users/mitchellmurphy/Desktop/DataScience/coursera/data/UCI_HAR_Dataset/"
dataDirectory <- paste(getwd(),"data/UCI_HAR_Dataset/",sep = "/")
# Read data
activityLabels <- fread(paste0(dataDirectory, "activity_labels.txt"), col.names = c("classLabels", "activityName"))
features <- fread(paste(dataDirectory, "features.txt"), col.names = c("index", "featureNames"))
featuresToInclude <- grep("(mean|std)\\(\\)", features[, featureNames])
measurements <- features[featuresToInclude,featureNames]
measurements <- gsub('[()]', '', measurements)
train.x <- fread(paste0(dataDirectory,"train/X_train.txt"))[, featuresToInclude, with = FALSE]
data.table::setnames(train.x, colnames(train.x), measurements)
train.y <- fread(paste0(dataDirectory,"train/Y_train.txt"), col.names = c("Activity"))
train.subjects <- fread(paste0(dataDirectory,"train/subject_train.txt"), col.names = c("SubjectNum"))
train <<- cbind(train.subjects, train.y, train.x)
# Now load up the test data
#test.x <- fread(paste(dataDirectory,"data/UCI_HAR_Dataset/test/X_test.txt", sep = "/"))[, featuresToInclude, with = FALSE]
#data.table::setnames(test.x, colnames(test.x), measurements)
#test.y <- fread(paste(dataDirectory,"data/UCI_HAR_Dataset/test/Y_test.txt", sep = "/"), col.names = c("Activity"))
#test.subjects <- fread(paste(rootPath,"data/UCI_HAR_Dataset/test/subject_test.txt", sep = "/"), col.names = c("SubjectNum"))
#test <<- cbind(test.subjects, test.y, test.x)
}
readData()
ataDirectory <- paste(getwd(),"data/UCI_HAR_Dataset/",sep = "/")
activityLabels <- fread(paste0(dataDirectory, "activity_labels.txt"), col.names = c("classLabels", "activityName"))
dataDirectory <- ataDirectory
rm(ataDirectory)
activityLabels <- fread(paste0(dataDirectory, "activity_labels.txt"), col.names = c("classLabels", "activityName"))
View(activityLabels)
features <- fread(paste(dataDirectory, "features.txt"), col.names = c("index", "featureNames"))
paste(dataDirectory, "features.txt"
)
paste0(dataDirectory, "features.txt")
features <- fread(paste0(dataDirectory, "features.txt"), col.names = c("index", "featureNames"))
View(features)
featuresToInclude <- grep("(mean|std)\\(\\)", features[, featureNames])
measurements <- features[featuresToInclude,featureNames]
measurements <- gsub('[()]', '', measurements)
measurements <- features[featuresToInclude,featureNames]
measurements <- gsub('[()]', '', measurements)
train.x <- fread(paste0(dataDirectory,"train/X_train.txt"))[, featuresToInclude, with = FALSE]
data.table::setNames(train.x, colnames(train.x), measurements)
data.table::setnames(train.x, colnames(train.x), measurements)
train.y <- fread(paste0(dataDirectory,"train/Y_train.txt"), col.names = c("Activity"))
train.subjects <- fread(paste0(dataDirectory,"train/subject_train.txt"), col.names = c("SubjectNum"))
train <<- cbind(train.subjects, train.y, train.x)
head(train)
init <- function(base_directory = "~/Desktop/DataScience/coursera/") {
# Set the working directory
setwd(base_directory)
# Load needed packages
library(data.table)
library(reshape2)
}
readData <- function() {
# "/Users/mitchellmurphy/Desktop/DataScience/coursera/data/UCI_HAR_Dataset/"
dataDirectory <- paste(getwd(),"data/UCI_HAR_Dataset/",sep = "/")
# Read data
activityLabels <- fread(paste0(dataDirectory, "activity_labels.txt"), col.names = c("classLabels", "activityName"))
features <- fread(paste0(dataDirectory, "features.txt"), col.names = c("index", "featureNames"))
featuresToInclude <- grep("(mean|std)\\(\\)", features[, featureNames])
measurements <- features[featuresToInclude,featureNames]
measurements <- gsub('[()]', '', measurements)
train.x <- fread(paste0(dataDirectory,"train/X_train.txt"))[, featuresToInclude, with = FALSE]
data.table::setnames(train.x, colnames(train.x), measurements)
train.y <- fread(paste0(dataDirectory,"train/Y_train.txt"), col.names = c("Activity"))
train.subjects <- fread(paste0(dataDirectory,"train/subject_train.txt"), col.names = c("SubjectNum"))
train <<- cbind(train.subjects, train.y, train.x)
# Now load up the test data
test.x <- fread(paste0(dataDirectory,"test/X_test.txt"))[, featuresToInclude, with = FALSE]
data.table::setnames(test.x, colnames(test.x), measurements)
test.y <- fread(paste0(dataDirectory,"test/Y_test.txt"), col.names = c("Activity"))
test.subjects <- fread(paste0(dataDirectory,"test/subject_test.txt"), col.names = c("SubjectNum"))
test <<- cbind(test.subjects, test.y, test.x)
}
init()
readData()
if(exists(train) & exists(test)) {
total <- rbind(train, test)
} else {
stop("train and test variables do not exist. Make sure you first call readAndClean()")
}
exists(test)
is.null(test)
if(is.null(train) & is.null(test)) {
stop("train and test variables do not exist. Make sure you first call readAndClean()")
}
total <- rbind(train, test)
typeof(total$SubjectNum)
# Coerce the SubjectNum column into factors
total$SubjectNum <- as.factor(total$SubjectNum)
typeof(total$SubjectNum)
class(total$SubjectNum)
total <- rbind(train, test)
class(total$SubjectNum)
# Coerce the SubjectNum column into factors
total$SubjectNum <- as.factor(total$SubjectNum)
## Coerce the SubjectNum column into factors
total$SubjectNum <- as.factor(total$SubjectNum)
# Read data
activityLabels <<- fread(paste0(dataDirectory, "activity_labels.txt"), col.names = c("classLabels", "activityName"))
# "/Users/mitchellmurphy/Desktop/DataScience/coursera/data/UCI_HAR_Dataset/"
dataDirectory <- paste(getwd(),"data/UCI_HAR_Dataset/",sep = "/")
# Read data
activityLabels <<- fread(paste0(dataDirectory, "activity_labels.txt"), col.names = c("classLabels", "activityName"))
factor(total$Activity, levels = activityLabels[["classLabels"]], labels = activityLabels[["activityName"]])
head(total$Activity)
typeof(activityLabels)
View(total)
total$Activity <- factor(total$Activity, levels = activityLabels[["classLabels"]], labels = activityLabels[["activityName"]])
head(total)
head(total$Activity)
total <- reshape2::melt(data = total, id = c("SubjectNum", "Activity"))
## From the data set in step 4, creates a second, independent tidy data set with the average of each variable for each activity and each subject
total <- reshape2::dcast(data = total, SubjectNum + Activity ~ variable, fun.aggregate = mean)
head(total)
init <- function(base_directory = "~/Desktop/DataScience/coursera/") {
# Set the working directory
setwd(base_directory)
# Load needed packages
library(data.table)
library(reshape2)
}
## This function will read in both the train and test sets
## and cleans it up so we just have a train and test data.tables
## Not split into 2 functions due to how I use lexical scoping
readAndCleanData <- function() {
# "/Users/mitchellmurphy/Desktop/DataScience/coursera/data/UCI_HAR_Dataset/"
dataDirectory <- paste(getwd(),"data/UCI_HAR_Dataset/",sep = "/")
# Read data
activityLabels <<- fread(paste0(dataDirectory, "activity_labels.txt"), col.names = c("classLabels", "activityName"))
features <- fread(paste0(dataDirectory, "features.txt"), col.names = c("index", "featureNames"))
featuresToInclude <- grep("(mean|std)\\(\\)", features[, featureNames])
measurements <- features[featuresToInclude,featureNames]
measurements <- gsub('[()]', '', measurements)
train.x <- fread(paste0(dataDirectory,"train/X_train.txt"))[, featuresToInclude, with = FALSE]
data.table::setnames(train.x, colnames(train.x), measurements)
train.y <- fread(paste0(dataDirectory,"train/Y_train.txt"), col.names = c("Activity"))
train.subjects <- fread(paste0(dataDirectory,"train/subject_train.txt"), col.names = c("SubjectNum"))
train <<- cbind(train.subjects, train.y, train.x)
# Now load up the test data
test.x <- fread(paste0(dataDirectory,"test/X_test.txt"))[, featuresToInclude, with = FALSE]
data.table::setnames(test.x, colnames(test.x), measurements)
test.y <- fread(paste0(dataDirectory,"test/Y_test.txt"), col.names = c("Activity"))
test.subjects <- fread(paste0(dataDirectory,"test/subject_test.txt"), col.names = c("SubjectNum"))
test <<- cbind(test.subjects, test.y, test.x)
}
init()
# this function will do most of the work for us (reading and cleaning up the data)
readAndCleanData()
## Merges the training and the test sets to create one data set.
if(is.null(train) & is.null(test)) {
stop("train and test variables do not exist. Make sure you first call readAndClean()")
}
total <- rbind(train, test)
## Coerce the SubjectNum column into factors
total$SubjectNum <- as.factor(total$SubjectNum)
# Now let us map the Activity number into its equiv name (read from activities.txt) in activitesLabel list
total$Activity <- factor(total$Activity, levels = activityLabels[["classLabels"]], labels = activityLabels[["activityName"]])
## From the data set in step 4, creates a second, independent tidy data set with the average of each variable for each activity and each subject
## This will be our final, "tidy" data set
total <- reshape2::melt(data = total, id = c("SubjectNum", "Activity"))
total <- reshape2::dcast(data = total, SubjectNum + Activity ~ variable, fun.aggregate = mean)
?library(package)
search()
fwrite(x = total, file = "tidyData.txt", quote = FALSE)
data.table::fwrite(x = total, file = "tidyData.txt", quote = FALSE)
colnames(total)
